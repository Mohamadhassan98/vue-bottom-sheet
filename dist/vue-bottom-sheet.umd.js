(function(l,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("hammerjs")):typeof define=="function"&&define.amd?define(["exports","vue","hammerjs"],e):(l=typeof globalThis<"u"?globalThis:l||self,e(l.VueBottomSheet={},l.Vue,l.Hammer))})(this,function(l,e,w){"use strict";const f=(o=>o&&typeof o=="object"&&"default"in o?o:{default:o})(w),C=[e.createElementVNode("div",{class:"bottom-sheet__bar"},null,-1)],B=e.defineComponent({__name:"VueBottomSheet",props:{overlay:{type:Boolean,default:!0},maxWidth:{default:"640px"},maxHeight:{default:"95vh"},clickToClose:{type:Boolean,default:!0},effect:{default:"fx-default"},rounded:{type:Boolean,default:!0},swipeable:{type:Boolean,default:!0},fullScreen:{type:Boolean,default:!1},overlayColor:{default:"#0000004D"},backgroundScrollable:{type:Boolean,default:!1},backgroundClickable:{type:Boolean,default:!1}},emits:["closed","opened"],setup(o,{expose:T,emit:m}){const a=o;e.useCssVars(t=>({"094de529":b.value}));const u=e.ref(),p=e.ref(),h=e.ref(),r=e.ref(!1),y=e.ref(!1),b=e.ref("auto"),s=e.ref(0),c={pan:null,content:null};let k=!1,g=0,d=0,i=0;e.onBeforeUnmount(()=>{var t,n;(t=c.pan)==null||t.destroy(),(n=c.content)==null||n.destroy()});const V=()=>{const t=/iPhone/.test(navigator.userAgent)&&!window.MSStream,n=window.screen.width/window.screen.height;return t&&n.toFixed(3)==="0.462"},E=async()=>{if(await e.nextTick(),b.value="auto",i=V()?20:0,d=p.value.clientHeight,b.value=`${d-h.value.clientHeight}px`,p.value.style.maxHeight=a.maxHeight,s.value=a.effect==="fx-slide-from-right"||a.effect==="fx-slide-from-left"?0:-d-i,!k){const t={recognizers:[[f.default.Pan,{direction:f.default.DIRECTION_VERTICAL}]]};c.pan=new f.default(h.value,t),c.pan&&c.pan.on("panstart panup pandown panend",n=>{S(n,"pan")}),c.content=new f.default(u.value,t),c.content&&c.content.on("panstart panup pandown panend",n=>{S(n,"content")}),k=!0}},H=()=>{r.value=!0,s.value=0,a.backgroundScrollable||(document.documentElement.style.overflowY="hidden"),m("opened")},S=(t,n)=>{if(a.swipeable){const v=-t.deltaY;n==="content"&&t.type==="panup"||n==="content"&&t.type==="pandown"&&g>0?u.value.scrollTop=g+v:(t.type==="panup"||t.type==="pandown")&&(y.value=!0,t.deltaY>0&&(s.value=v)),t.isFinal&&(g=u.value.scrollTop,y.value=!1,s.value<-30?(r.value=!1,s.value=-d-i,document.documentElement.style.overflowY="",m("closed")):s.value=0)}},_=()=>{r.value=!1,s.value=a.effect==="fx-slide-from-right"||a.effect==="fx-slide-from-left"?0:-d-i,document.documentElement.style.overflowY="",m("closed")},x=t=>{if(a.clickToClose){const n=t.target;(n.classList.contains("bottom-sheet__backdrop")||n.classList.contains("bottom-sheet"))&&_()}};return T({open:H,close:_}),E(),(t,n)=>(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createElementVNode("div",e.mergeProps({ref:"bottomSheet"},t.$attrs,{class:["bottom-sheet",{opened:r.value,closed:r.value===!1,moving:y.value}],style:{"pointer-events":o.backgroundClickable&&o.clickToClose===!1?"none":"all"},onMousedown:x,onTouchstart:x}),[o.overlay?(e.openBlock(),e.createElementBlock("div",{key:0,class:"bottom-sheet__backdrop",style:e.normalizeStyle({background:o.overlayColor})},null,4)):e.createCommentVNode("",!0),e.createElementVNode("div",{ref_key:"bottomSheetCard",ref:p,style:e.normalizeStyle([{bottom:s.value+"px",maxWidth:o.maxWidth,maxHeight:o.maxHeight},{height:o.fullScreen?"100vh":"auto"},{"pointer-events":"all"}]),class:e.normalizeClass(["bottom-sheet__card",{stripe:e.unref(i),square:!o.rounded},o.effect])},[e.createElementVNode("div",{ref_key:"pan",ref:h,class:"bottom-sheet__pan"},C,512),e.createElementVNode("div",{ref_key:"bottomSheetCardContent",ref:u,class:"bottom-sheet__content"},[e.renderSlot(t.$slots,"default")],512)],6)],16)]))}}),j="";l.VueBottomSheet=B,Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
